(()=>{function u(b){const c=(new Date).getFullYear(),e=c+1,h=c-1;if(0===b)return holiday=fetch(`https://holidays-jp.github.io/api/v1/${c}/date.json`).then(d=>{if(!d.ok)throw Error(`${d.status} ${d.statusText}`);return d.json()}).then(d=>d).catch(d=>{console.error(d)});if(1===b)return holidayNext=fetch(`https://holidays-jp.github.io/api/v1/${e}/date.json`).then(d=>{if(!d.ok)throw Error(`${d.status} ${d.statusText}`);return d.json()}).then(d=>d).catch(d=>{console.error(d)});if(2===b)return holidayPrev=
fetch(`https://holidays-jp.github.io/api/v1/${h}/date.json`).then(d=>{if(!d.ok)throw Error(`${d.status} ${d.statusText}`);return d.json()}).then(d=>d).catch(d=>{console.error(d)})}function w(b){b.target.classList.add("invalid")}window.addEventListener("load",()=>{function b(a){return a.replace(/[\u3041-\u3096]/g,f=>{f=f.charCodeAt(0)+96;return String.fromCharCode(f)})}function c(a){return a.replace(/[\uff21-\uff3a\uff41-\uff5a\uff10-\uff19\uff01-\uff5e]/g,f=>String.fromCharCode(f.charCodeAt(0)-65248))}
function e(a){return a.replace(/[!-~]/g,f=>String.fromCharCode(f.charCodeAt(0)+65248))}try{$(".hira2kana").each(function(){$(this).on("blur",function(){const a=b($(this).val());$(this).val(a)})})}catch(a){console.info(a)}try{$(".zen2half").each(function(){$(this).on("blur",function(){const a=c($(this).val());$(this).val(a)})})}catch(a){console.info(a)}try{$(".half2zen").each(function(){$(this).on("blur",function(){const a=e($(this).val());$(this).val(a)})})}catch(a){console.info(a)}try{document.querySelectorAll('input[type="url"]').forEach(a=>
{a.addEventListener("change",f=>{let k=f.target.value,n=document.getElementById(f.target.id+"_check"),p=n.querySelector("a");0>f.target.value.search(/^http/)&&k&&(k="https://"+k,f.target.value=k);k?(n.style.display="block",p.setAttribute("href",k)):(n.style.display="none",p.setAttribute("href",""))})})}catch(a){console.info(a)}try{var h=document.querySelectorAll("input.zip");if(1>h.length)return!1;h.forEach(a=>{a.addEventListener("change",f=>{let k=f.target.value;k=k.replace(/[^0-9\uff10-\uff19]/g,
"");f.target.value=k.substring(0,3)+"-"+k.substring(3)})})}catch(a){console.info(a)}h=location.pathname;let d=document.getElementById("passwd"),l=document.getElementById("employee_no");try{if(0<h.indexOf("/finished")){const a=document.getElementById("js_pwd").dataset.pwd,f=document.getElementById("js_id").dataset.id;Cookies.set("pwd",a,{expires:30,secure:!0});Cookies.set("id",f,{expires:30,secure:!0})}}catch(a){console.info("Cannot set cookie")}try{if(d){const a=Cookies.get("pwd"),f=Cookies.get("id");
document.querySelector('label[for="passwd"]').classList.add("active");document.querySelector('label[for="employee_no"]').classList.add("active");d.setAttribute("value",a);l.setAttribute("value",f)}}catch(a){console.info("Cannot get cookie")}try{const a=(f,k)=>{k?(f.setAttribute("required",""),f.removeAttribute("disabled")):(f.removeAttribute("required"),f.setAttribute("disabled",""))};document.querySelectorAll(".is-toggle").forEach(f=>{const k=f.dataset.state;let n=document.getElementById(f.dataset.tgt);
const p=n.querySelectorAll(".required"),y=x=>{try{"true"===k?(n.classList.add("active"),p.forEach(m=>{a(m,!0);"hidden"===m.getAttribute("type")&&a(m.nextElementSibling,!0)})):(n.classList.remove("active"),p.forEach(m=>{a(m,!1);"hidden"===m.getAttribute("type")&&a(m.nextElementSibling,!1)}))}catch(m){console.info(m)}};f.addEventListener("click",x=>{y(f)})})}catch(a){}});M.AutoInit();var g=document.getElementById("js-select-manager");const z=function(b){let c=1;document.querySelectorAll("#js-manager-content li.section").forEach(e=>
{Number(b)===c?(e.classList.add("active"),e.querySelector(".collapsible-body").style.display="block"):(e.classList.remove("active"),e.querySelector(".collapsible-body").style.display="none");c++})};g&&g.querySelectorAll("a").forEach(b=>{const c=b.getAttribute("href").replace("#anc","");b.addEventListener("click",function(e,h=c){z(h)})});(g=document.querySelectorAll("input.js-attend"))&&g.forEach(b=>{b.addEventListener("change",()=>{const c=b.dataset.val,e="js_"+b.getAttribute("name"),h=b.dataset.tgt;
document.getElementById(e)&&(document.getElementById(e).innerHTML=c);document.getElementById("company_telegram"+h).setAttribute("value",c)})});(async function(){const b=await u(0),c=await u(1),e=await u(2),h=Object.assign(e,b,c);document.querySelector('input[type="date"]')&&flatpickr('input[type="date"]',{locale:"ja",altFormat:"Y\u5e74n\u6708j\u65e5\uff08D\uff09",altInput:!0,allowInput:!0,ariaDateFormat:"Y-m-d",onDayCreate:(d,l,a,f)=>{a=f.dateObj;d=a.getFullYear();l=("00"+(a.getMonth()+1)).slice(-2);
a=("00"+a.getDate()).slice(-2);`${d}-${l}-${a}`in h&&f.classList.add("is-holiday")}});document.querySelector('input[type="time"]')&&flatpickr('input[type="time"]',{enableTime:!0,noCalendar:!0,allowInput:!0,dateFormat:"H:i",time_24hr:!0});if(document.querySelector('input[type="datetime-local"]')){let d=flatpickr('input[type="datetime-local"]',{enableTime:!0,altInput:!0,altFormat:"Y\u5e74n\u6708j\u65e5\uff08D\uff09H:i",ariaDateFormat:"Y-m-d H:i",allowInput:!0,defaultDay:new Date,defaultHour:(new Date).getHours(),
defaultMinute:(new Date).getMinutes(),locale:"ja"});const l=document.getElementById("reception");l&&(setTimeout(()=>{l.checked?d.setDate(new Date,!1,"Y-m-d H:i"):(d.clear(),document.getElementById("reception").removeAttribute("checked"))},800),l.addEventListener("click",function(a){l.checked?d.setDate(new Date,!1,"Y-m-d H:i"):d.clear()}))}})().then(b=>{(b=document.querySelectorAll("select.flatpickr-monthDropdown-months"))&&b.forEach(c=>{c.classList.add("browser-default")})});(g=document.querySelectorAll("input[name=wake]"))&&
g.forEach(b=>{b.addEventListener("click",c=>{"1"===c.target.value?(document.querySelectorAll("input[name=funeral_same_ceremony]").forEach(e=>{"1"===e.value?e.checked=!0:(e.checked=!1,e.setAttribute("disabled",""),e.nextElementSibling.style.textDecoration="line-through")}),c=document.getElementById("js_funeral_same_ceremony"),c.classList.add("active"),c.querySelectorAll(".required").forEach(e=>{e.setAttribute("required","")})):document.querySelectorAll("input[name=funeral_same_ceremony]").forEach(e=>
{"1"!==e.value&&(e.removeAttribute("disabled"),e.nextElementSibling.style.textDecoration="none")})})});const q=document.getElementById("passed_away_relationship");if(q){let b=document.getElementById("chief_mourner0"),c=document.getElementById("chief_mourner1"),e=document.getElementById("js_chief_mourner");q.addEventListener("change",()=>{if("1"===q.value){b.disabled=!0;b.classList.add("disabled");c.checked=!0;e.classList.add("active");try{document.getElementById("chief_mourner_name").setAttribute("required",
""),document.getElementById("chief_mourner_kana").setAttribute("required",""),document.getElementById("chief_mourner_relationship").setAttribute("required","")}catch(h){console.info(h)}}else if("7"===q.value)try{document.querySelector('[name=fax_posting][value="1"]').checked=!0}catch(h){console.info(h)}else b.disabled=!1,b.classList.remove("disabled")})}g=document.querySelectorAll("input[name=wake]");const v=document.querySelectorAll("input[name=funeral]"),r=b=>{const c=document.querySelector('input[name=floral_tribute][value="2"]'),
e=document.querySelector('input[name=telegram][value="2"]');b?(c.checked=!1,e.checked=!1,c.setAttribute("disabled",""),e.setAttribute("disabled","")):(c.removeAttribute("disabled"),e.removeAttribute("disabled"))};g&&v&&(g.forEach(b=>{b.addEventListener("change",c=>{1===+document.querySelector("input[name=wake]:checked").value&&1===+document.querySelector("input[name=funeral]:checked").value?r(!0):r(!1)})}),v.forEach(b=>{b.addEventListener("change",c=>{1===+document.querySelector("input[name=wake]:checked").value&&
1===+document.querySelector("input[name=funeral]:checked").value?r(!0):r(!1)})}));document.querySelectorAll("select").forEach(b=>{b.addEventListener("invalid",w)});(g=document.querySelectorAll(".collapsible-header"))&&g.forEach(b=>{b.addEventListener("click",c=>{document.getElementById("accordion-state").value=c.target.parentNode.dataset.type})});if(g=document.getElementById("accordion-state"))g=g.value?g.value:"1",document.querySelectorAll(".collapsible .section").forEach(b=>{b.classList.remove("active")}),
g=document.querySelector('[data-type="'+g+'"]'),console.log(),g.classList.add("active"),g.querySelector(".collapsible-body").style.display="block";const t=document.getElementById("js_classification_check");if(t){g=document.getElementById("classification");const b=document.querySelector("#js_classification_check .required");if(5==g.value||6==g.value)t.style.display="block";g.addEventListener("change",c=>{c=c.currentTarget.value;6==c||5==c?(t.style.display="block",b.setAttribute("required","")):(t.style.display=
"none",b.removeAttribute("required"))})}})();
